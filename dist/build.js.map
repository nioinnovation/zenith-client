{"version":3,"sources":["node_modules/browserify/node_modules/browser-pack/_prelude.js","node_modules/browserify/node_modules/events/events.js","src/index.js"],"names":[],"mappings":"AAAA;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;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","file":"build.js","sourceRoot":"/source/","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\nfunction EventEmitter() {\n  this._events = this._events || {};\n  this._maxListeners = this._maxListeners || undefined;\n}\nmodule.exports = EventEmitter;\n\n// Backwards-compat with node 0.10.x\nEventEmitter.EventEmitter = EventEmitter;\n\nEventEmitter.prototype._events = undefined;\nEventEmitter.prototype._maxListeners = undefined;\n\n// By default EventEmitters will print a warning if more than 10 listeners are\n// added to it. This is a useful default which helps finding memory leaks.\nEventEmitter.defaultMaxListeners = 10;\n\n// Obviously not all Emitters should be limited to 10. This function allows\n// that to be increased. Set to zero for unlimited.\nEventEmitter.prototype.setMaxListeners = function(n) {\n  if (!isNumber(n) || n < 0 || isNaN(n))\n    throw TypeError('n must be a positive number');\n  this._maxListeners = n;\n  return this;\n};\n\nEventEmitter.prototype.emit = function(type) {\n  var er, handler, len, args, i, listeners;\n\n  if (!this._events)\n    this._events = {};\n\n  // If there is no 'error' event listener then throw.\n  if (type === 'error') {\n    if (!this._events.error ||\n        (isObject(this._events.error) && !this._events.error.length)) {\n      er = arguments[1];\n      if (er instanceof Error) {\n        throw er; // Unhandled 'error' event\n      }\n      throw TypeError('Uncaught, unspecified \"error\" event.');\n    }\n  }\n\n  handler = this._events[type];\n\n  if (isUndefined(handler))\n    return false;\n\n  if (isFunction(handler)) {\n    switch (arguments.length) {\n      // fast cases\n      case 1:\n        handler.call(this);\n        break;\n      case 2:\n        handler.call(this, arguments[1]);\n        break;\n      case 3:\n        handler.call(this, arguments[1], arguments[2]);\n        break;\n      // slower\n      default:\n        args = Array.prototype.slice.call(arguments, 1);\n        handler.apply(this, args);\n    }\n  } else if (isObject(handler)) {\n    args = Array.prototype.slice.call(arguments, 1);\n    listeners = handler.slice();\n    len = listeners.length;\n    for (i = 0; i < len; i++)\n      listeners[i].apply(this, args);\n  }\n\n  return true;\n};\n\nEventEmitter.prototype.addListener = function(type, listener) {\n  var m;\n\n  if (!isFunction(listener))\n    throw TypeError('listener must be a function');\n\n  if (!this._events)\n    this._events = {};\n\n  // To avoid recursion in the case that type === \"newListener\"! Before\n  // adding it to the listeners, first emit \"newListener\".\n  if (this._events.newListener)\n    this.emit('newListener', type,\n              isFunction(listener.listener) ?\n              listener.listener : listener);\n\n  if (!this._events[type])\n    // Optimize the case of one listener. Don't need the extra array object.\n    this._events[type] = listener;\n  else if (isObject(this._events[type]))\n    // If we've already got an array, just append.\n    this._events[type].push(listener);\n  else\n    // Adding the second element, need to change to array.\n    this._events[type] = [this._events[type], listener];\n\n  // Check for listener leak\n  if (isObject(this._events[type]) && !this._events[type].warned) {\n    if (!isUndefined(this._maxListeners)) {\n      m = this._maxListeners;\n    } else {\n      m = EventEmitter.defaultMaxListeners;\n    }\n\n    if (m && m > 0 && this._events[type].length > m) {\n      this._events[type].warned = true;\n      console.error('(node) warning: possible EventEmitter memory ' +\n                    'leak detected. %d listeners added. ' +\n                    'Use emitter.setMaxListeners() to increase limit.',\n                    this._events[type].length);\n      if (typeof console.trace === 'function') {\n        // not supported in IE 10\n        console.trace();\n      }\n    }\n  }\n\n  return this;\n};\n\nEventEmitter.prototype.on = EventEmitter.prototype.addListener;\n\nEventEmitter.prototype.once = function(type, listener) {\n  if (!isFunction(listener))\n    throw TypeError('listener must be a function');\n\n  var fired = false;\n\n  function g() {\n    this.removeListener(type, g);\n\n    if (!fired) {\n      fired = true;\n      listener.apply(this, arguments);\n    }\n  }\n\n  g.listener = listener;\n  this.on(type, g);\n\n  return this;\n};\n\n// emits a 'removeListener' event iff the listener was removed\nEventEmitter.prototype.removeListener = function(type, listener) {\n  var list, position, length, i;\n\n  if (!isFunction(listener))\n    throw TypeError('listener must be a function');\n\n  if (!this._events || !this._events[type])\n    return this;\n\n  list = this._events[type];\n  length = list.length;\n  position = -1;\n\n  if (list === listener ||\n      (isFunction(list.listener) && list.listener === listener)) {\n    delete this._events[type];\n    if (this._events.removeListener)\n      this.emit('removeListener', type, listener);\n\n  } else if (isObject(list)) {\n    for (i = length; i-- > 0;) {\n      if (list[i] === listener ||\n          (list[i].listener && list[i].listener === listener)) {\n        position = i;\n        break;\n      }\n    }\n\n    if (position < 0)\n      return this;\n\n    if (list.length === 1) {\n      list.length = 0;\n      delete this._events[type];\n    } else {\n      list.splice(position, 1);\n    }\n\n    if (this._events.removeListener)\n      this.emit('removeListener', type, listener);\n  }\n\n  return this;\n};\n\nEventEmitter.prototype.removeAllListeners = function(type) {\n  var key, listeners;\n\n  if (!this._events)\n    return this;\n\n  // not listening for removeListener, no need to emit\n  if (!this._events.removeListener) {\n    if (arguments.length === 0)\n      this._events = {};\n    else if (this._events[type])\n      delete this._events[type];\n    return this;\n  }\n\n  // emit removeListener for all listeners on all events\n  if (arguments.length === 0) {\n    for (key in this._events) {\n      if (key === 'removeListener') continue;\n      this.removeAllListeners(key);\n    }\n    this.removeAllListeners('removeListener');\n    this._events = {};\n    return this;\n  }\n\n  listeners = this._events[type];\n\n  if (isFunction(listeners)) {\n    this.removeListener(type, listeners);\n  } else if (listeners) {\n    // LIFO order\n    while (listeners.length)\n      this.removeListener(type, listeners[listeners.length - 1]);\n  }\n  delete this._events[type];\n\n  return this;\n};\n\nEventEmitter.prototype.listeners = function(type) {\n  var ret;\n  if (!this._events || !this._events[type])\n    ret = [];\n  else if (isFunction(this._events[type]))\n    ret = [this._events[type]];\n  else\n    ret = this._events[type].slice();\n  return ret;\n};\n\nEventEmitter.prototype.listenerCount = function(type) {\n  if (this._events) {\n    var evlistener = this._events[type];\n\n    if (isFunction(evlistener))\n      return 1;\n    else if (evlistener)\n      return evlistener.length;\n  }\n  return 0;\n};\n\nEventEmitter.listenerCount = function(emitter, type) {\n  return emitter.listenerCount(type);\n};\n\nfunction isFunction(arg) {\n  return typeof arg === 'function';\n}\n\nfunction isNumber(arg) {\n  return typeof arg === 'number';\n}\n\nfunction isObject(arg) {\n  return typeof arg === 'object' && arg !== null;\n}\n\nfunction isUndefined(arg) {\n  return arg === void 0;\n}\n","import EventEmitter from \"events\"\n\nexport class Fusion {\n\n    constructor(hostString){\n\n        if (typeof hostString == \"object\" && hostString.mock == true){\n          this.hostString = \"mock\"\n          this._socket = new MockSocket(hostString, this.classify)\n        } else {\n          this.hostString = hostString\n          this._socket = new Socket(hostString, this.classify)\n        }\n\n        // Hack for fusion(collectionName) syntax\n        self = (collectionName) => self.collection(collectionName)\n        Object.setPrototypeOf(self, Object.getPrototypeOf(this))\n        return self\n    }\n\n    collection(name){\n        //Check if collection exists?? Nope, EAFP let server handle it.\n        return new Collection(this, name)\n    }\n\n    classify(response){\n        // response -> responseType\n        // this might need to go in another class and be given to this class\n        if(response.new_val !== null && response.old_val !== null){\n            return 'changed'\n        }else if(response.new_val !== null && response.old_val === null){\n            return 'added'\n        }else if(response.new_val === null && response.old_val !== null){\n            return 'removed'\n        }else if(response.state === 'synced'){\n            return 'synced'\n        }else{\n            return 'unknown'\n        }\n    }\n\n    _query(path){\n        return this.socket.send(\"QUERY\", path)\n    }\n\n    _store(path, document, conflict){\n        if(conflict === 'replace'){\n            return this.socket.send(\"STORE_REPLACE\", {path: path, data: document})\n        }else if(conflict === 'error'){\n            return this.socket.send(\"STORE_ERROR\", {path: path, data: document})\n        }else{\n            return Promise.reject(`value of conflict not understood: ${conflict}`)\n        }\n    }\n\n    _update(path, document){\n        return this.socket.send(\"UPDATE\", {path: path, data: document})\n    }\n\n    _remove(path, id){\n        return this.socket.send(\"REMOVE\", {path: path, data: id})\n    }\n\n    _subscribe(path, updates){\n        if(updates){\n            return this.socket.subscribe(path)\n        }else{\n            //Emulate subscription with one-shot query\n            var emitter = new EventEmitter()\n            this.socket.send(\"QUERY\", path).then(\n                // Do we have continues etc like cursors?\n                // Right now assuming we get results back as an array\n                (results) => {\n                    for(let result of results) {\n                        emitter.emit(\"added\", {new_val: result, old_val: null})\n                    }\n                }\n            )\n            return emitter\n        }\n    }\n\n}\n\nclass Socket {\n    constructor(hostString, classifier){\n        this.ws = new WebSocket(`ws://${hostString}`)\n        this.ws.onmessage = this._onMessage\n        this.ws.onclose = this._onClose\n        this.ws.onopen = this._onOpen\n        this.classifier = classifier\n        this.promises = {}\n        this.emitters = {}\n        this.requestCounter = 0\n    }\n\n    send(type, data){\n        var requestId = this.requestCounter++\n        var req = {type: type, data: data, requestId: requestId}\n        return new Promise((resolve, reject) =>\n            this.promises[requestId] = {resolve: resolve, reject:reject})\n    }\n\n    subscribe(path){\n        var requestId = this.requestCounter++\n        var req = {type: \"SUBSCRIBE\", data: data, requestId: requestId}\n        var emitter = new EventEmitter() // customize?\n        this.emitters[requestId] = emitter\n        return emitter\n    }\n\n    _onClose(event){\n        for(let emitter of this.emitters){\n            emitter.emit('disconnected', event)\n        }\n        // Do we do something with promises? What if we reconnect\n    }\n\n    _onOpen(event){\n        for(let emitter of this.emitters){\n            emitter.emit('reconnected', event)\n        }\n    }\n\n    _onMessage(event){\n        var resp = JSON.parse(event.data)\n        if(this.promises.hasOwnProperty(resp.requestId)){\n            var promise = this.promises[resp.requestId]\n            delete this.promises[resp.requestId]\n\n            if (resp.error !== undefined){\n                promise.reject(resp.error)\n            } else {\n                promise.resolve(resp.value)\n            }\n        }else if(this.emitters.hasOwnProperty(resp.requestId)){\n            var emitter = this.emitters[resp.requestId]\n            if(resp.error !== undefined){\n                emitter.emit(\"error\", resp.error)\n            }else{\n                emitter.emit(this.classifier(resp.data), resp.value)\n            }\n        }else{\n            console.error(`Unrecognized response: ${event}`)\n        }\n    }\n}\n\nclass MockSocket extends Socket {\n  constructor(hostString, classifier){\n    super()\n    this.hostString = hostString;\n    this.docs = [];\n    this.classifier = classifier;\n    this.promises = {};\n    this.emitters = {};\n    this.requestCounter = 0;\n  }\n\n  send(type, data){\n      //Basically, don't actually send anything just store it in an array,\n      // inefficient search and no error handling but fine for mocking\n\n      switch(type){\n        case \"update\":\n          this.docs.forEach(function(doc, index){\n            if (doc.id == data.id){\n              this.data[index] = data;\n            }\n          });\n          break;\n        case \"remove\":\n          this.docs.forEach(function(doc, index){\n            if (doc.id == data.id){\n              this.data = this.data.splice(index);\n            }\n          });\n          break;\n        case \"store_replace\":\n        case \"store_error\":\n          this.docs.push(data);\n          break;\n      }\n\n      return Promise.resolve(true);\n  }\n\n  _onOpen(event){\n      for(let emitter of this.emitters){\n          emitter.emit('reconnected', event);\n      }\n  }\n}\n\n\nclass TermBase {\n\n    constructor(fusion){\n        this.fusion = fusion\n    }\n\n    subscribe(updates: true){\n        // should create a changefeed query, return eventemitter\n        return this.fusion._subscribe(this.path)\n    }\n\n    value(){\n        // return promise with no changefeed\n        return this.fusion._value(this.path)\n    }\n}\n\nclass Collection {\n\n    constructor(fusion, collectionName){\n        this.collectionName = collectionName\n        this.path = {collection: collectionName}\n        this.fusion = fusion\n    }\n\n    findOne(id){\n        return new FindOne(this.fusion, this.path, id)\n    }\n\n    find(fieldName, fieldValue){\n        return new Find(this.fusion, this.path, fieldName, fieldValue)\n    }\n\n    between(minVal, maxVal, field: 'id'){\n        return new Between(this.fusion, this.path, minVal, maxVal,field)\n    }\n\n    order(field: 'id', descending: false){\n        return new Order(this.fusion, this.path, field, descending)\n    }\n\n    store(document, conflict: 'replace'){\n        return this.fusion._store(this.path, document, conflict)\n    }\n\n    update(document){\n        return this.fusion._update(this.path, document)\n    }\n\n    remove(document){\n        return this.fusion._remove(this.path, document)\n    }\n}\n\nclass Find extends TermBase {\n    constructor(fusion, path, field, value){\n        super(fusion)\n        this.field\n        this.value = value\n        this.path = Object.assign({find: {field: field, value: value}}, path)\n    }\n\n    order(field: 'id', descending: false){\n        return new Order(this.fusion, this.path, field, descending)\n    }\n\n    limit(size){\n        return new Limit(this.fusion, this.path, size);\n    }\n}\n\nclass FindOne extends TermBase {\n    constructor(fusion, path, docId){\n        super(fusion)\n        this.id = docId\n        this.path = Object.assign({findOne: docId}, path)\n    }\n}\n\nclass Between extends TermBase {\n    constructor(fusion, path, minVal, maxVal, field){\n        super(fusion)\n        this.minVal = minVal\n        this.maxVal = maxVal\n        this.field = field\n        this.path = Object.assign({between: {min: minVal, max: maxVal, field: field}}, path)\n    }\n\n    limit(size){\n        return new Limit(this.fusion, this.path, size);\n    }\n}\n\nclass Order {\n    constructor(fusion, path, field, descending){\n        this.fusion = fusion\n        this.field = field\n        this.direction = direction\n        this.path = Object.assign({order: {field: field, descending: descending}}, path)\n    }\n\n    limit(size){\n        return new Limit(this.fusion, this.path, size)\n    }\n\n    between(minVal, maxVal){\n        // between is forced to have the same field as this term\n        return new Between(this.fusion, this.path, minVal, maxVal, this.field)\n    }\n}\n\nclass Limit extends TermBase {\n    constructor(fusion, path, size){\n        super(fusion)\n        this.size = size\n        this.path = Object.assign({limit: size}, path)\n    }\n}\n"]}